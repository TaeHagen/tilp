var Pn=Object.defineProperty;var Rn=(t,e,n)=>e in t?Pn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ke=(t,e,n)=>(Rn(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function A(){}const we=t=>t;function Qe(t,e){for(const n in e)t[n]=e[n];return t}function jn(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function tn(t){return t()}function Ot(){return Object.create(null)}function X(t){t.forEach(tn)}function re(t){return typeof t=="function"}function $(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function In(t){return Object.keys(t).length===0}function Xe(t,...e){if(t==null)return A;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ie(t){let e;return Xe(t,n=>e=n)(),e}function nn(t,e,n){t.$$.on_destroy.push(Xe(e,n))}function ln(t,e,n,l){if(t){const s=sn(t,e,n,l);return t[0](s)}}function sn(t,e,n,l){return t[1]&&l?Qe(n.ctx.slice(),t[1](l(e))):n.ctx}function rn(t,e,n,l){if(t[2]&&l){const s=t[2](l(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(e.dirty.length,s.length);for(let r=0;r<o;r+=1)i[r]=e.dirty[r]|s[r];return i}return e.dirty|s}return e.dirty}function on(t,e,n,l,s,i){if(s){const o=sn(e,n,l,i);t.p(o,s)}}function cn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function te(t){return t??""}const un=typeof window<"u";let je=un?()=>window.performance.now():()=>Date.now(),ct=un?t=>requestAnimationFrame(t):A;const We=new Set;function an(t){We.forEach(e=>{e.c(t)||(We.delete(e),e.f())}),We.size!==0&&ct(an)}function Ie(t){let e;return We.size===0&&ct(an),{promise:new Promise(n=>{We.add(e={c:t,f:n})}),abort(){We.delete(e)}}}function B(t,e){t.appendChild(e)}function fn(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function qn(t){const e=w("style");return Nn(fn(t),e),e.sheet}function Nn(t,e){return B(t.head||t,e),e.sheet}function k(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode&&t.parentNode.removeChild(t)}function xe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function Un(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function q(t){return document.createTextNode(t)}function D(){return q(" ")}function ve(){return q("")}function R(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function y(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Hn(t){return Array.from(t.childNodes)}function ge(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function P(t,e,n,l){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function Q(t,e,n){t.classList[n?"add":"remove"](e)}function dn(t,e,{bubbles:n=!1,cancelable:l=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,l,e),s}class zn{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,l=null){this.e||(this.is_svg?this.e=Un(n.nodeName):this.e=w(n.nodeName),this.t=n,this.c(e)),this.i(l)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)k(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(g)}}function Se(t,e){return new t(e)}const $e=new Map;let et=0;function Vn(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Kn(t,e){const n={stylesheet:qn(e),rules:{}};return $e.set(t,n),n}function De(t,e,n,l,s,i,o,r=0){const u=16.666/l;let c=`{
`;for(let _=0;_<=1;_+=u){const E=e+(n-e)*i(_);c+=_*100+`%{${o(E,1-E)}}
`}const f=c+`100% {${o(n,1-n)}}
}`,a=`__svelte_${Vn(f)}_${r}`,m=fn(t),{stylesheet:p,rules:d}=$e.get(m)||Kn(m,t);d[a]||(d[a]=!0,p.insertRule(`@keyframes ${a} ${f}`,p.cssRules.length));const h=t.style.animation||"";return t.style.animation=`${h?`${h}, `:""}${a} ${l}ms linear ${s}ms 1 both`,et+=1,a}function Pe(t,e){const n=(t.style.animation||"").split(", "),l=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=n.length-l.length;s&&(t.style.animation=l.join(", "),et-=s,et||Gn())}function Gn(){ct(()=>{et||($e.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&g(e)}),$e.clear())})}function Yn(t,e,n,l){if(!e)return A;const s=t.getBoundingClientRect();if(e.left===s.left&&e.right===s.right&&e.top===s.top&&e.bottom===s.bottom)return A;const{delay:i=0,duration:o=300,easing:r=we,start:u=je()+i,end:c=u+o,tick:f=A,css:a}=n(t,{from:e,to:s},l);let m=!0,p=!1,d;function h(){a&&(d=De(t,0,1,o,i,r,a)),i||(p=!0)}function _(){a&&Pe(t,d),m=!1}return Ie(E=>{if(!p&&E>=u&&(p=!0),p&&E>=c&&(f(1,0),_()),!m)return!1;if(p){const v=E-u,C=0+1*r(v/o);f(C,1-C)}return!0}),h(),f(0,1),_}function Zn(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:l}=e,s=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=l,_n(t,s)}}function _n(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const l=getComputedStyle(t),s=l.transform==="none"?"":l.transform;t.style.transform=`${s} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let Re;function _e(t){Re=t}function Fe(){if(!Re)throw new Error("Function called outside component initialization");return Re}function mn(t){Fe().$$.on_mount.push(t)}function hn(t){Fe().$$.on_destroy.push(t)}function ut(){const t=Fe();return(e,n,{cancelable:l=!1}={})=>{const s=t.$$.callbacks[e];if(s){const i=dn(e,n,{cancelable:l});return s.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}function Jn(t,e){return Fe().$$.context.set(t,e),e}function pn(t){return Fe().$$.context.get(t)}function Qn(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(l=>l.call(this,e))}const Te=[],Oe=[],Ze=[],St=[],Xn=Promise.resolve();let rt=!1;function xn(){rt||(rt=!0,Xn.then(at))}function he(t){Ze.push(t)}const st=new Set;let Ce=0;function at(){if(Ce!==0)return;const t=Re;do{try{for(;Ce<Te.length;){const e=Te[Ce];Ce++,_e(e),$n(e.$$)}}catch(e){throw Te.length=0,Ce=0,e}for(_e(null),Te.length=0,Ce=0;Oe.length;)Oe.pop()();for(let e=0;e<Ze.length;e+=1){const n=Ze[e];st.has(n)||(st.add(n),n())}Ze.length=0}while(Te.length);for(;St.length;)St.pop()();rt=!1,st.clear(),_e(t)}function $n(t){if(t.fragment!==null){t.update(),X(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(he)}}let Le;function ft(){return Le||(Le=Promise.resolve(),Le.then(()=>{Le=null})),Le}function ye(t,e,n){t.dispatchEvent(dn(`${e?"intro":"outro"}${n}`))}const Je=new Set;let ce;function G(){ce={r:0,c:[],p:ce}}function Y(){ce.r||X(ce.c),ce=ce.p}function O(t,e){t&&t.i&&(Je.delete(t),t.i(e))}function M(t,e,n,l){if(t&&t.o){if(Je.has(t))return;Je.add(t),ce.c.push(()=>{Je.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}const dt={duration:0};function el(t,e,n){const l={direction:"in"};let s=e(t,n,l),i=!1,o,r,u=0;function c(){o&&Pe(t,o)}function f(){const{delay:m=0,duration:p=300,easing:d=we,tick:h=A,css:_}=s||dt;_&&(o=De(t,0,1,p,m,d,_,u++)),h(0,1);const E=je()+m,v=E+p;r&&r.abort(),i=!0,he(()=>ye(t,!0,"start")),r=Ie(C=>{if(i){if(C>=v)return h(1,0),ye(t,!0,"end"),c(),i=!1;if(C>=E){const T=d((C-E)/p);h(T,1-T)}}return i})}let a=!1;return{start(){a||(a=!0,Pe(t),re(s)?(s=s(l),ft().then(f)):f())},invalidate(){a=!1},end(){i&&(c(),i=!1)}}}function tl(t,e,n){const l={direction:"out"};let s=e(t,n,l),i=!0,o;const r=ce;r.r+=1;function u(){const{delay:c=0,duration:f=300,easing:a=we,tick:m=A,css:p}=s||dt;p&&(o=De(t,1,0,f,c,a,p));const d=je()+c,h=d+f;he(()=>ye(t,!1,"start")),Ie(_=>{if(i){if(_>=h)return m(0,1),ye(t,!1,"end"),--r.r||X(r.c),!1;if(_>=d){const E=a((_-d)/f);m(1-E,E)}}return i})}return re(s)?ft().then(()=>{s=s(l),u()}):u(),{end(c){c&&s.tick&&s.tick(1,0),i&&(o&&Pe(t,o),i=!1)}}}function Ge(t,e,n,l){const s={direction:"both"};let i=e(t,n,s),o=l?0:1,r=null,u=null,c=null;function f(){c&&Pe(t,c)}function a(p,d){const h=p.b-o;return d*=Math.abs(h),{a:o,b:p.b,d:h,duration:d,start:p.start,end:p.start+d,group:p.group}}function m(p){const{delay:d=0,duration:h=300,easing:_=we,tick:E=A,css:v}=i||dt,C={start:je()+d,b:p};p||(C.group=ce,ce.r+=1),r||u?u=C:(v&&(f(),c=De(t,o,p,h,d,_,v)),p&&E(0,1),r=a(C,h),he(()=>ye(t,p,"start")),Ie(T=>{if(u&&T>u.start&&(r=a(u,h),u=null,ye(t,r.b,"start"),v&&(f(),c=De(t,o,r.b,r.duration,0,_,i.css))),r){if(T>=r.end)E(o=r.b,1-o),ye(t,r.b,"end"),u||(r.b?f():--r.group.r||X(r.group.c)),r=null;else if(T>=r.start){const N=T-r.start;o=r.a+r.d*_(N/r.duration),E(o,1-o)}}return!!(r||u)}))}return{run(p){re(i)?ft().then(()=>{i=i(s),m(p)}):m(p)},end(){f(),r=u=null}}}function Ft(t,e){const n=e.token={};function l(s,i,o,r){if(e.token!==n)return;e.resolved=r;let u=e.ctx;o!==void 0&&(u=u.slice(),u[o]=r);const c=s&&(e.current=s)(u);let f=!1;e.block&&(e.blocks?e.blocks.forEach((a,m)=>{m!==i&&a&&(G(),M(a,1,1,()=>{e.blocks[m]===a&&(e.blocks[m]=null)}),Y())}):e.block.d(1),c.c(),O(c,1),c.m(e.mount(),e.anchor),f=!0),e.block=c,e.blocks&&(e.blocks[i]=c),f&&at()}if(jn(t)){const s=Fe();if(t.then(i=>{_e(s),l(e.then,1,e.value,i),_e(null)},i=>{if(_e(s),l(e.catch,2,e.error,i),_e(null),!e.hasCatch)throw i}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,t),!0;e.resolved=t}}function nl(t,e,n){const l=e.slice(),{resolved:s}=t;t.current===t.then&&(l[t.value]=s),t.current===t.catch&&(l[t.error]=s),t.block.p(l,n)}const bn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function ll(t,e){M(t,1,1,()=>{e.delete(t.key)})}function sl(t,e){t.f(),ll(t,e)}function il(t,e,n,l,s,i,o,r,u,c,f,a){let m=t.length,p=i.length,d=m;const h={};for(;d--;)h[t[d].key]=d;const _=[],E=new Map,v=new Map;for(d=p;d--;){const S=a(s,i,d),L=n(S);let I=o.get(L);I?l&&I.p(S,e):(I=c(L,S),I.c()),E.set(L,_[d]=I),L in h&&v.set(L,Math.abs(d-h[L]))}const C=new Set,T=new Set;function N(S){O(S,1),S.m(r,f),o.set(S.key,S),f=S.first,p--}for(;m&&p;){const S=_[p-1],L=t[m-1],I=S.key,x=L.key;S===L?(f=S.first,m--,p--):E.has(x)?!o.has(I)||C.has(I)?N(S):T.has(x)?m--:v.get(I)>v.get(x)?(T.add(I),N(S)):(C.add(x),m--):(u(L,o),m--)}for(;m--;){const S=t[m];E.has(S.key)||u(S,o)}for(;p;)N(_[p-1]);return _}function rl(t,e){const n={},l={},s={$$scope:1};let i=t.length;for(;i--;){const o=t[i],r=e[i];if(r){for(const u in o)u in r||(l[u]=1);for(const u in r)s[u]||(n[u]=r[u],s[u]=1);t[i]=r}else for(const u in o)s[u]=1}for(const o in l)o in n||(n[o]=void 0);return n}function ol(t){return typeof t=="object"&&t!==null?t:{}}function K(t){t&&t.c()}function U(t,e,n,l){const{fragment:s,after_update:i}=t.$$;s&&s.m(e,n),l||he(()=>{const o=t.$$.on_mount.map(tn).filter(re);t.$$.on_destroy?t.$$.on_destroy.push(...o):X(o),t.$$.on_mount=[]}),i.forEach(he)}function H(t,e){const n=t.$$;n.fragment!==null&&(X(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function cl(t,e){t.$$.dirty[0]===-1&&(Te.push(t),xn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ne(t,e,n,l,s,i,o,r=[-1]){const u=Re;_e(t);const c=t.$$={fragment:null,ctx:[],props:i,update:A,not_equal:s,bound:Ot(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Ot(),dirty:r,skip_bound:!1,root:e.target||u.$$.root};o&&o(c.root);let f=!1;if(c.ctx=n?n(t,e.props||{},(a,m,...p)=>{const d=p.length?p[0]:m;return c.ctx&&s(c.ctx[a],c.ctx[a]=d)&&(!c.skip_bound&&c.bound[a]&&c.bound[a](d),f&&cl(t,a)),m}):[],c.update(),f=!0,X(c.before_update),c.fragment=l?l(c.ctx):!1,e.target){if(e.hydrate){const a=Hn(e.target);c.fragment&&c.fragment.l(a),a.forEach(g)}else c.fragment&&c.fragment.c();e.intro&&O(t.$$.fragment),U(t,e.target,e.anchor,e.customElement),at()}_e(u)}class le{$destroy(){H(this,1),this.$destroy=A}$on(e,n){if(!re(n))return A;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!In(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Be=[];function tt(t,e=A){let n;const l=new Set;function s(r){if($(t,r)&&(t=r,n)){const u=!Be.length;for(const c of l)c[1](),Be.push(c,t);if(u){for(let c=0;c<Be.length;c+=2)Be[c][0](Be[c+1]);Be.length=0}}}function i(r){s(r(t))}function o(r,u=A){const c=[r,u];return l.add(c),l.size===1&&(n=e(s)||A),r(t),()=>{l.delete(c),l.size===0&&(n(),n=null)}}return{set:s,update:i,subscribe:o}}let me=window;function nt(t,e="application/octet-stream"){let n=me.FS.readFile(t);var l=document.createElement("a");l.download=t,l.href=URL.createObjectURL(new Blob([n],{type:e})),l.style.display="none",document.body.appendChild(l),l.click(),setTimeout(()=>{document.body.removeChild(l),URL.revokeObjectURL(l.href)},2e3)}const Mt=1<<0,At=1<<1,Lt=1<<2;function Dt(t){return new Promise(e=>{var n=window,l=document.createElement("input");l.type="file",l.onchange=function(s){var i=s.target.files[0],o=new FileReader;o.readAsArrayBuffer(i),t==null&&(t=i.name),o.onload=function(){var r=o.result,u=new Uint8Array(r),c=n.FS.open(t,"w+");n.FS.write(c,u,0,u.length),n.FS.close(c),e(t)}},l.click()})}class Pt{constructor(e,n,l,s,i,o,r){this.device=e,this.name=n,this.type=l,this.native=s,this.children=i,this.parent=o,this.dataType=r}call(e,n="void",l=[],s=[]){return Module.ccall(e,n,["number","number",...l],[this.device.ptr,this.native,...s],{async:!0})}async read(){let e;if(me.var_file=(l,s)=>{e=Module.UTF8ToString(l,s)},await this.call("recv_var","number",["number"],[this.dataType=="vars"?1:0])!=0)throw new Error("Failed to read variable!");return e}async delete(e=!1){if(await this.call("del_var")!=0)throw new Error("Failed to delete variable!");e||await this.device.list_dir()}}class Rt{constructor(e,n,l){Ke(this,"entries");this.native=e,this.device=n,this.type=l;let s=null,i=this.entries=new Pt(this.device,"",0,0,[],null,l);me.tree_value=(o,r,u,c)=>{s=new Pt(this.device,Module.UTF8ToString(o,r),u,c,[],i,this.type),i.children.push(s)},me.tree_children=()=>{i=s},me.tree_parent=()=>{i=s.parent}}call(e,n="void",l=[],s=[]){return Module.ccall(e,n,["number",...l],[this.native,...s],{async:!0})}simplify(){let e=this.entries;for(;e.children.length==1&&e.name=="";)e=e.children[0];return e}destroy(){return this.call("destroy_list")}}class ul{constructor(e,n){Ke(this,"apps",tt(null));Ke(this,"vars",tt(null));this.calc=e,this.ptr=n}call(e,n="void",l=[],s=[]){return Module.ccall(e,n,["number",...l],[this.ptr,...s],{async:!0})}async send_key(e){if(await this.call("calc_send_key","number",["number"],[e])!=0)throw new Error("Failed to send key!")}async backup(e){if(await this.call("calc_backup","number",["number"],[e])!=0)throw new Error("Failed to backup!")}async restore(e){if(await this.call("calc_restore","number",["number"],[e])!=0)throw new Error("Failed to restore!");await this.list_dir()}async read_files(e){let n;me.var_file=(o,r)=>{n=Module.UTF8ToString(o,r)};var l=this.call("malloc","number",["number"],[e.length*4]);let s=new Uint32Array(e.map(o=>o.native));Module.HEAPU8.set(new Uint8Array(s.buffer),l);let i=await this.call("recv_var_multiple","void",["number","number"],[e.length,l]);if(i==515)throw new Error("Group too big (max 64k)!");if(i!=0)throw new Error("Failed to download files!");return n}async send_file(e){let n=Module.allocateUTF8(e);if(!(await this.call("load_file","number",["number"],[n])==0))throw new Error("Failed to send file!");await Module.ccall("free","void",["number"],[n],{async:!0}),await this.list_dir()}async ready(){if(!(await this.call("calc_ready","number")==1))throw new Error("Failed to sync with calculator!")}async destroy(){ie(this.vars)!=null&&await ie(this.vars).destroy(),ie(this.apps)!=null&&await ie(this.apps).destroy(),await this.call("destroy_dev")}async recv_screen(){let e;if(me.frame=(n,l,s,i)=>{let o=new Uint8ClampedArray(Module.HEAPU8.buffer,n,l);e=new ImageData(o,s,i)},await this.call("recv_screen","number")!=0)throw new Error("Failed to read screen!");return e}async list_dir(){if(await this.ready(),me.tree_sending=(e,n)=>{e=="vars"&&(ie(this.vars)!=null&&ie(this.vars).destroy(),this.vars.set(new Rt(n,this,e))),e=="apps"&&(ie(this.apps)!=null&&ie(this.apps).destroy(),this.apps.set(new Rt(n,this,e)))},await this.call("list_dir","number")!=0)throw new Error("Failed to list directory!");this.apps.set(ie(this.apps)),this.vars.set(ie(this.vars))}}async function Ye(){let t=[];return me.found_calc=(e,n,l,s)=>{var i=Module.UTF8ToString(e,n);t.push({name:i,model:l,port:s})},await Module.ccall("list_devices","number",[],[],{async:!0}),t}async function yn(t){let e=await Module.ccall("connect_device","number",["number","number"],[t.port,t.model],{async:!0});if(e==0)throw new Error("Failed to connect!");return new ul(t,e)}async function al(){return await Module.ccall("stitch_rom_segments","void",[],[],{async:!0})}function fl(){return navigator.usb.requestDevice({filters:[{vendorId:1105,productId:57345},{vendorId:1105,productId:57348},{vendorId:1105,productId:57347},{vendorId:1105,productId:57352},{vendorId:1105,productId:57362}]})}function dl(t){let e,n,l,s,i,o,r,u;const c=t[3].default,f=ln(c,t,t[2],null);return{c(){e=w("label"),f&&f.c(),n=D(),l=w("input"),s=D(),i=w("span"),y(l,"type","checkbox"),l.checked=t[0],y(l,"class","svelte-apbl1t"),y(i,"class","checkmark svelte-apbl1t"),y(e,"class","container svelte-apbl1t"),P(e,"margin-bottom",t[1]+"px")},m(a,m){k(a,e,m),f&&f.m(e,null),B(e,n),B(e,l),B(e,s),B(e,i),o=!0,r||(u=R(l,"change",t[4]),r=!0)},p(a,[m]){f&&f.p&&(!o||m&4)&&on(f,c,a,a[2],o?rn(c,a[2],m,null):cn(a[2]),null),(!o||m&1)&&(l.checked=a[0]),(!o||m&2)&&P(e,"margin-bottom",a[1]+"px")},i(a){o||(O(f,a),o=!0)},o(a){M(f,a),o=!1},d(a){a&&g(e),f&&f.d(a),r=!1,u()}}}function _l(t,e,n){let{$$slots:l={},$$scope:s}=e,{checked:i}=e,{margin:o=12}=e;function r(u){Qn.call(this,t,u)}return t.$$set=u=>{"checked"in u&&n(0,i=u.checked),"margin"in u&&n(1,o=u.margin),"$$scope"in u&&n(2,s=u.$$scope)},[i,o,s,l,r]}class gn extends le{constructor(e){super(),ne(this,e,_l,dl,$,{checked:0,margin:1})}}function jt(t,e,n){const l=t.slice();return l[7]=e[n],l}function ml(t){let e=t[7].name+"",n;return{c(){n=q(e)},m(l,s){k(l,n,s)},p:A,d(l){l&&g(n)}}}function It(t){let e,n,l;function s(){return t[5](t[7])}return n=new gn({props:{checked:!!(t[2]&t[7].value),$$slots:{default:[ml]},$$scope:{ctx:t}}}),n.$on("change",s),{c(){e=w("div"),K(n.$$.fragment)},m(i,o){k(i,e,o),U(n,e,null),l=!0},p(i,o){t=i;const r={};o&4&&(r.checked=!!(t[2]&t[7].value)),o&1024&&(r.$$scope={dirty:o,ctx:t}),n.$set(r)},i(i){l||(O(n.$$.fragment,i),l=!0)},o(i){M(n.$$.fragment,i),l=!1},d(i){i&&g(e),H(n)}}}function hl(t){let e,n,l=t[0]?"backup":"restore",s,i,o,r,u,c,f=t[0]?"Start Backup":"Start Restore",a,m,p,d,h=t[4],_=[];for(let v=0;v<h.length;v+=1)_[v]=It(jt(t,h,v));const E=v=>M(_[v],1,1,()=>{_[v]=null});return{c(){e=w("h1"),n=q("Choose what to "),s=q(l),i=D();for(let v=0;v<_.length;v+=1)_[v].c();o=D(),r=w("button"),u=w("span"),u.textContent="done",c=D(),a=q(f),P(e,"width","14em"),y(u,"class","material-symbols-outlined"),P(r,"margin-top","5px"),P(r,"padding-left","0")},m(v,C){k(v,e,C),B(e,n),B(e,s),k(v,i,C);for(let T=0;T<_.length;T+=1)_[T].m(v,C);k(v,o,C),k(v,r,C),B(r,u),B(r,c),B(r,a),m=!0,p||(d=R(r,"click",t[6]),p=!0)},p(v,[C]){if((!m||C&1)&&l!==(l=v[0]?"backup":"restore")&&ge(s,l),C&20){h=v[4];let T;for(T=0;T<h.length;T+=1){const N=jt(v,h,T);_[T]?(_[T].p(N,C),O(_[T],1)):(_[T]=It(N),_[T].c(),O(_[T],1),_[T].m(o.parentNode,o))}for(G(),T=h.length;T<_.length;T+=1)E(T);Y()}(!m||C&1)&&f!==(f=v[0]?"Start Backup":"Start Restore")&&ge(a,f)},i(v){if(!m){for(let C=0;C<h.length;C+=1)O(_[C]);m=!0}},o(v){_=_.filter(Boolean);for(let C=0;C<_.length;C+=1)M(_[C]);m=!1},d(v){v&&g(e),v&&g(i),xe(_,v),v&&g(o),v&&g(r),p=!1,d()}}}function pl(t,e,n){let{backup:l}=e,{cb:s}=e;const{close:i}=pn("simple-modal");let o=Lt|Mt|At,r=[{value:Lt,name:"Apps"},{value:Mt,name:"RAM vars"},{value:At,name:"FLASH vars"}];const u=f=>{o&f.value?n(2,o&=~f.value):n(2,o|=f.value)},c=()=>{i(),s(o)};return t.$$set=f=>{"backup"in f&&n(0,l=f.backup),"cb"in f&&n(1,s=f.cb)},[l,s,o,i,r,u,c]}class qt extends le{constructor(e){super(),ne(this,e,pl,hl,$,{backup:0,cb:1})}}function wn(t){const e=t-1;return e*e*e+1}function vn(t,{delay:e=0,duration:n=400,easing:l=we}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:l,css:i=>`opacity: ${i*s}`}}function bl(t,{delay:e=0,duration:n=400,easing:l=wn,x:s=0,y:i=0,opacity:o=0}={}){const r=getComputedStyle(t),u=+r.opacity,c=r.transform==="none"?"":r.transform,f=u*(1-o);return{delay:e,duration:n,easing:l,css:(a,m)=>`
			transform: ${c} translate(${(1-a)*s}px, ${(1-a)*i}px);
			opacity: ${u-f*m}`}}function yl(t,{from:e,to:n},l={}){const s=getComputedStyle(t),i=s.transform==="none"?"":s.transform,[o,r]=s.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*o/n.width-(n.left+o),c=e.top+e.height*r/n.height-(n.top+r),{delay:f=0,duration:a=p=>Math.sqrt(p)*120,easing:m=wn}=l;return{delay:f,duration:re(a)?a(Math.sqrt(u*u+c*c)):a,easing:m,css:(p,d)=>{const h=d*u,_=d*c,E=p+d*e.width/n.width,v=p+d*e.height/n.height;return`transform: ${i} translate(${h}px, ${_}px) scale(${E}, ${v});`}}}const gl={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}},wl=()=>{const{subscribe:t,update:e}=tt([]),n={};let l=0;function s(c){return c instanceof Object}function i(c="default",f={}){return n[c]=f,n}function o(c,f){const a={target:"default",...s(c)?c:{...f,msg:c}},m=n[a.target]||{},p={...gl,...m,...a,theme:{...m.theme,...a.theme},classes:[...m.classes||[],...a.classes||[]],id:++l};return e(d=>p.reversed?[...d,p]:[p,...d]),l}function r(c){e(f=>{if(!f.length||c===0)return[];if(typeof c=="function")return f.filter(m=>c(m));if(s(c))return f.filter(m=>m.target!==c.target);const a=c||Math.max(...f.map(m=>m.id));return f.filter(m=>m.id!==a)})}function u(c,f){const a=s(c)?c:{...f,id:c};e(m=>{const p=m.findIndex(d=>d.id===a.id);return p>-1&&(m[p]={...m[p],...a}),m})}return{subscribe:t,push:o,pop:r,set:u,_init:i}},oe=wl();function Nt(t){return Object.prototype.toString.call(t)==="[object Date]"}function ot(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const l=e.map((s,i)=>ot(t[i],s));return s=>l.map(i=>i(s))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(Nt(t)&&Nt(e)){t=t.getTime(),e=e.getTime();const i=e-t;return o=>new Date(t+o*i)}const l=Object.keys(e),s={};return l.forEach(i=>{s[i]=ot(t[i],e[i])}),i=>{const o={};return l.forEach(r=>{o[r]=s[r](i)}),o}}if(n==="number"){const l=e-t;return s=>t+s*l}throw new Error(`Cannot interpolate ${n} values`)}function vl(t,e={}){const n=tt(t);let l,s=t;function i(o,r){if(t==null)return n.set(t=o),Promise.resolve();s=o;let u=l,c=!1,{delay:f=0,duration:a=400,easing:m=we,interpolate:p=ot}=Qe(Qe({},e),r);if(a===0)return u&&(u.abort(),u=null),n.set(t=s),Promise.resolve();const d=je()+f;let h;return l=Ie(_=>{if(_<d)return!0;c||(h=p(t,o),typeof a=="function"&&(a=a(t,o)),c=!0),u&&(u.abort(),u=null);const E=_-d;return E>a?(n.set(t=o),!1):(n.set(t=h(m(E/a))),!0)}),l.promise}return{set:i,update:(o,r)=>i(o(s,t),r),subscribe:n.subscribe}}function kl(t){let e,n=t[0].msg+"",l;return{c(){e=new zn(!1),l=ve(),e.a=l},m(s,i){e.m(n,s,i),k(s,l,i)},p(s,i){i&1&&n!==(n=s[0].msg+"")&&e.p(n)},i:A,o:A,d(s){s&&g(l),s&&e.d()}}}function Cl(t){let e,n,l;const s=[t[2]];var i=t[0].component.src;function o(r){let u={};for(let c=0;c<s.length;c+=1)u=Qe(u,s[c]);return{props:u}}return i&&(e=Se(i,o())),{c(){e&&K(e.$$.fragment),n=ve()},m(r,u){e&&U(e,r,u),k(r,n,u),l=!0},p(r,u){const c=u&4?rl(s,[ol(r[2])]):{};if(i!==(i=r[0].component.src)){if(e){G();const f=e;M(f.$$.fragment,1,0,()=>{H(f,1)}),Y()}i?(e=Se(i,o()),K(e.$$.fragment),O(e.$$.fragment,1),U(e,n.parentNode,n)):e=null}else i&&e.$set(c)},i(r){l||(e&&O(e.$$.fragment,r),l=!0)},o(r){e&&M(e.$$.fragment,r),l=!1},d(r){r&&g(n),e&&H(e,r)}}}function Ut(t){let e,n,l;return{c(){e=w("div"),y(e,"class","_toastBtn pe svelte-95rq8t"),y(e,"role","button"),y(e,"tabindex","0")},m(s,i){k(s,e,i),n||(l=[R(e,"click",t[4]),R(e,"keydown",t[8])],n=!0)},p:A,d(s){s&&g(e),n=!1,X(l)}}}function Bl(t){let e,n,l,s,i,o,r,u,c,f;const a=[Cl,kl],m=[];function p(h,_){return h[0].component?0:1}l=p(t),s=m[l]=a[l](t);let d=t[0].dismissable&&Ut(t);return{c(){e=w("div"),n=w("div"),s.c(),i=D(),d&&d.c(),o=D(),r=w("progress"),y(n,"role","status"),y(n,"class","_toastMsg svelte-95rq8t"),Q(n,"pe",t[0].component),y(r,"class","_toastBar svelte-95rq8t"),r.value=t[1],y(e,"class","_toastItem svelte-95rq8t"),Q(e,"pe",t[0].pausable)},m(h,_){k(h,e,_),B(e,n),m[l].m(n,null),B(e,i),d&&d.m(e,null),B(e,o),B(e,r),u=!0,c||(f=[R(e,"mouseenter",t[9]),R(e,"mouseleave",t[6])],c=!0)},p(h,[_]){let E=l;l=p(h),l===E?m[l].p(h,_):(G(),M(m[E],1,1,()=>{m[E]=null}),Y(),s=m[l],s?s.p(h,_):(s=m[l]=a[l](h),s.c()),O(s,1),s.m(n,null)),(!u||_&1)&&Q(n,"pe",h[0].component),h[0].dismissable?d?d.p(h,_):(d=Ut(h),d.c(),d.m(e,o)):d&&(d.d(1),d=null),(!u||_&2)&&(r.value=h[1]),(!u||_&1)&&Q(e,"pe",h[0].pausable)},i(h){u||(O(s),u=!0)},o(h){M(s),u=!1},d(h){h&&g(e),m[l].d(),d&&d.d(),c=!1,X(f)}}}function it(t,e="undefined"){return typeof t===e}function Tl(t,e,n){let l,{item:s}=e,i=s.initial,o=i,r=!1,u={},c;const f=vl(s.initial,{duration:s.duration,easing:we});nn(t,f,v=>n(1,l=v));function a(){oe.pop(s.id)}function m(){(l===1||l===0)&&a()}function p(){!r&&l!==i&&(f.set(l,{duration:0}),r=!0)}function d(){if(r){const v=s.duration,C=v-v*((l-o)/(i-o));f.set(i,{duration:C}).then(m),r=!1}}function h(v=document){if(it(v.hidden))return;const C=()=>v.hidden?p():d(),T="visibilitychange";v.addEventListener(T,C),c=()=>v.removeEventListener(T,C),C()}mn(h),hn(()=>{it(s.onpop,"function")&&s.onpop(s.id),c&&c()});const _=v=>{v instanceof KeyboardEvent&&["Enter"," "].includes(v.key)&&a()},E=()=>{s.pausable&&p()};return t.$$set=v=>{"item"in v&&n(0,s=v.item)},t.$$.update=()=>{if(t.$$.dirty&1&&(it(s.progress)||n(0,s.next=s.progress,s)),t.$$.dirty&131&&i!==s.next&&(n(7,i=s.next),o=l,r=!1,f.set(i).then(m)),t.$$.dirty&1&&s.component){const{props:v={},sendIdTo:C}=s.component;n(2,u={...v,...C&&{[C]:s.id}})}},[s,l,u,f,a,p,d,i,_,E]}class El extends le{constructor(e){super(),ne(this,e,Tl,Bl,$,{item:0})}}function Ht(t,e,n){const l=t.slice();return l[4]=e[n],l}function zt(t,e){let n,l,s,i,o,r,u,c,f=A,a;return l=new El({props:{item:e[4]}}),{key:t,first:null,c(){n=w("li"),K(l.$$.fragment),s=D(),y(n,"class",i=te(e[4].classes.join(" "))+" svelte-1u812xz"),y(n,"style",o=Vt(e[4].theme)),this.first=n},m(m,p){k(m,n,p),U(l,n,null),B(n,s),a=!0},p(m,p){e=m;const d={};p&1&&(d.item=e[4]),l.$set(d),(!a||p&1&&i!==(i=te(e[4].classes.join(" "))+" svelte-1u812xz"))&&y(n,"class",i),(!a||p&1&&o!==(o=Vt(e[4].theme)))&&y(n,"style",o)},r(){c=n.getBoundingClientRect()},f(){Zn(n),f(),_n(n,c)},a(){f(),f=Yn(n,c,yl,{duration:200})},i(m){a||(O(l.$$.fragment,m),he(()=>{u&&u.end(1),r=el(n,bl,e[4].intro),r.start()}),a=!0)},o(m){M(l.$$.fragment,m),r&&r.invalidate(),u=tl(n,vn,{}),a=!1},d(m){m&&g(n),H(l),m&&u&&u.end()}}}function Wl(t){let e,n=[],l=new Map,s,i=t[0];const o=r=>r[4].id;for(let r=0;r<i.length;r+=1){let u=Ht(t,i,r),c=o(u);l.set(c,n[r]=zt(c,u))}return{c(){e=w("ul");for(let r=0;r<n.length;r+=1)n[r].c();y(e,"class","_toastContainer svelte-1u812xz")},m(r,u){k(r,e,u);for(let c=0;c<n.length;c+=1)n[c].m(e,null);s=!0},p(r,[u]){if(u&1){i=r[0],G();for(let c=0;c<n.length;c+=1)n[c].r();n=il(n,u,o,1,r,i,l,e,sl,zt,null,Ht);for(let c=0;c<n.length;c+=1)n[c].a();Y()}},i(r){if(!s){for(let u=0;u<i.length;u+=1)O(n[u]);s=!0}},o(r){for(let u=0;u<n.length;u+=1)M(n[u]);s=!1},d(r){r&&g(e);for(let u=0;u<n.length;u+=1)n[u].d()}}}function Vt(t){return Object.keys(t).reduce((e,n)=>`${e}${n}:${t[n]};`,"")}function Ol(t,e,n){let l;nn(t,oe,r=>n(3,l=r));let{options:s={}}=e,{target:i="default"}=e,o=[];return t.$$set=r=>{"options"in r&&n(1,s=r.options),"target"in r&&n(2,i=r.target)},t.$$.update=()=>{t.$$.dirty&6&&oe._init(i,s),t.$$.dirty&12&&n(0,o=l.filter(r=>r.target===i))},[o,s,i,l]}class Sl extends le{constructor(e){super(),ne(this,e,Ol,Wl,$,{options:1,target:2})}}const Fl={"--toastColor":"white","--toastBackground":"var(--danger)","--toastBarBackground":"var(--danger-dark)"},Ee={"--toastColor":"white","--toastBackground":"var(--success)","--toastBarBackground":"var(--success-dark)"};function Ml(t){let e=t[0].name+"",n;return{c(){n=q(e)},m(l,s){k(l,n,s)},p(l,s){s&1&&e!==(e=l[0].name+"")&&ge(n,e)},d(l){l&&g(n)}}}function Al(t){let e,n,l,s,i,o,r,u,c,f,a,m,p;return n=new gn({props:{checked:t[1],margin:0,$$slots:{default:[Ml]},$$scope:{ctx:t}}}),n.$on("change",t[5]),{c(){e=w("div"),K(n.$$.fragment),l=D(),s=w("div"),i=D(),o=w("button"),r=w("span"),r.textContent="download",u=D(),c=w("button"),f=w("span"),f.textContent="delete",P(s,"flex-grow","1"),y(r,"class","material-symbols-outlined"),o.disabled=t[3],y(f,"class","material-symbols-outlined"),P(f,"color","var(--danger)"),c.disabled=t[3],y(e,"class","row svelte-1yrndbo"),P(e,"border-top",(t[2]?0:1)+"px solid #ccc")},m(d,h){k(d,e,h),U(n,e,null),B(e,l),B(e,s),B(e,i),B(e,o),B(o,r),B(e,u),B(e,c),B(c,f),a=!0,m||(p=[R(o,"click",t[6]),R(c,"click",t[7])],m=!0)},p(d,[h]){const _={};h&2&&(_.checked=d[1]),h&257&&(_.$$scope={dirty:h,ctx:d}),n.$set(_),(!a||h&8)&&(o.disabled=d[3]),(!a||h&8)&&(c.disabled=d[3]),(!a||h&4)&&P(e,"border-top",(d[2]?0:1)+"px solid #ccc")},i(d){a||(O(n.$$.fragment,d),a=!0)},o(d){M(n.$$.fragment,d),a=!1},d(d){d&&g(e),H(n),m=!1,X(p)}}}function Ll(t,e,n){let{entry:l}=e,s=!1,{selected:i=!1}=e,{first:o=!1}=e,r=ut();const u=()=>r("toggle"),c=async()=>{try{n(3,s=!0);let a=await l.read();nt(a)}finally{n(3,s=!1)}},f=async()=>{if(confirm("Are you sure you want to delete this variable?"))try{n(3,s=!0),await l.delete(),oe.push("Variables deleted",{theme:Ee})}finally{n(3,s=!1)}};return t.$$set=a=>{"entry"in a&&n(0,l=a.entry),"selected"in a&&n(1,i=a.selected),"first"in a&&n(2,o=a.first)},[l,i,o,s,r,u,c,f]}class kn extends le{constructor(e){super(),ne(this,e,Ll,Al,$,{entry:0,selected:1,first:2})}}function Dl(t){let e,n,l,s,i;return{c(){e=w("h1"),e.textContent="Screen",n=D(),l=w("canvas"),y(l,"width",s=t[0].width),y(l,"height",i=t[0].height),y(l,"class","svelte-1y6s679")},m(o,r){k(o,e,r),k(o,n,r),k(o,l,r),t[2](l)},p(o,[r]){r&1&&s!==(s=o[0].width)&&y(l,"width",s),r&1&&i!==(i=o[0].height)&&y(l,"height",i)},i:A,o:A,d(o){o&&g(e),o&&g(n),o&&g(l),t[2](null)}}}function Pl(t,e,n){let{imageData:l}=e,s;function i(o){Oe[o?"unshift":"push"](()=>{s=o,n(1,s)})}return t.$$set=o=>{"imageData"in o&&n(0,l=o.imageData)},t.$$.update=()=>{t.$$.dirty&3&&s!=null&&s.getContext("2d").putImageData(l,0,0)},[l,s,i]}class Rl extends le{constructor(e){super(),ne(this,e,Pl,Dl,$,{imageData:0})}}function Kt(t,e,n){const l=t.slice();return l[10]=e[n],l[29]=n,l}function Gt(t,e,n){const l=t.slice();return l[30]=e[n],l[29]=n,l}function jl(t){let e,n,l,s,i,o,r,u,c,f,a,m,p,d,h,_,E,v,C,T,N,S=t[0].calc.name+"",L,I,x;function z(W,j){return W[4]?Nl:ql}let ee=z(t),V=ee(t);function ue(W,j){return W[5]?Hl:Ul}let se=ue(t),Z=se(t);return{c(){e=w("button"),n=w("span"),n.textContent="refresh",l=D(),s=w("button"),i=w("span"),i.textContent="upload_file",o=D(),r=w("button"),u=w("span"),V.c(),c=D(),f=w("button"),a=w("span"),Z.c(),m=D(),p=w("button"),d=w("span"),d.textContent="screen_share",h=D(),_=w("button"),_.innerHTML='<span class="material-symbols-outlined">link_off</span>',E=D(),v=w("div"),C=D(),T=w("div"),N=q("Connected: "),L=q(S),y(n,"class","material-symbols-outlined"),e.disabled=t[6],y(e,"title","Refresh"),y(i,"class","material-symbols-outlined"),y(s,"title","Upload"),s.disabled=t[3],y(u,"class","material-symbols-outlined"),y(r,"title","Backup"),r.disabled=t[4],y(a,"class","material-symbols-outlined"),P(a,"position","relative"),P(a,"top","2px"),y(f,"title","Restore"),f.disabled=t[5],y(d,"class","material-symbols-outlined"),P(d,"position","relative"),P(d,"top","1px"),y(p,"title","Capture Screen"),p.disabled=t[7],y(_,"title","Disconnect"),P(v,"flex-grow","1"),P(T,"color","var(--success)"),P(T,"font-weight","600"),P(T,"font-size","14px")},m(W,j){k(W,e,j),B(e,n),k(W,l,j),k(W,s,j),B(s,i),k(W,o,j),k(W,r,j),B(r,u),V.m(u,null),k(W,c,j),k(W,f,j),B(f,a),Z.m(a,null),k(W,m,j),k(W,p,j),B(p,d),k(W,h,j),k(W,_,j),k(W,E,j),k(W,v,j),k(W,C,j),k(W,T,j),B(T,N),B(T,L),I||(x=[R(e,"click",t[14]),R(s,"click",t[11]),R(r,"click",t[12]),R(f,"click",t[13]),R(p,"click",t[15]),R(_,"click",t[19])],I=!0)},p(W,j){j[0]&64&&(e.disabled=W[6]),j[0]&8&&(s.disabled=W[3]),ee!==(ee=z(W))&&(V.d(1),V=ee(W),V&&(V.c(),V.m(u,null))),j[0]&16&&(r.disabled=W[4]),se!==(se=ue(W))&&(Z.d(1),Z=se(W),Z&&(Z.c(),Z.m(a,null))),j[0]&32&&(f.disabled=W[5]),j[0]&128&&(p.disabled=W[7]),j[0]&1&&S!==(S=W[0].calc.name+"")&&ge(L,S)},d(W){W&&g(e),W&&g(l),W&&g(s),W&&g(o),W&&g(r),V.d(),W&&g(c),W&&g(f),Z.d(),W&&g(m),W&&g(p),W&&g(h),W&&g(_),W&&g(E),W&&g(v),W&&g(C),W&&g(T),I=!1,X(x)}}}function Il(t){let e,n=t[8].length+"",l,s,i,o,r,u,c,f,a,m,p,d;return{c(){e=w("div"),l=q(n),s=q(" selected"),i=D(),o=w("div"),r=D(),u=w("button"),c=w("span"),c.textContent="download",f=D(),a=w("button"),m=w("span"),m.textContent="delete",P(e,"font-weight","600"),P(e,"padding-left","10px"),P(o,"flex-grow","1"),y(c,"class","material-symbols-outlined"),u.disabled=t[6],y(u,"title","Refresh"),y(m,"class","material-symbols-outlined"),a.disabled=t[6],y(a,"title","Refresh"),P(a,"color","var(--danger)")},m(h,_){k(h,e,_),B(e,l),B(e,s),k(h,i,_),k(h,o,_),k(h,r,_),k(h,u,_),B(u,c),k(h,f,_),k(h,a,_),B(a,m),p||(d=[R(u,"click",t[17]),R(a,"click",t[18])],p=!0)},p(h,_){_[0]&256&&n!==(n=h[8].length+"")&&ge(l,n),_[0]&64&&(u.disabled=h[6]),_[0]&64&&(a.disabled=h[6])},d(h){h&&g(e),h&&g(i),h&&g(o),h&&g(r),h&&g(u),h&&g(f),h&&g(a),p=!1,X(d)}}}function ql(t){let e;return{c(){e=q("save")},m(n,l){k(n,e,l)},d(n){n&&g(e)}}}function Nl(t){let e;return{c(){e=q("sync")},m(n,l){k(n,e,l)},d(n){n&&g(e)}}}function Ul(t){let e;return{c(){e=q("settings_backup_restore")},m(n,l){k(n,e,l)},d(n){n&&g(e)}}}function Hl(t){let e;return{c(){e=q("sync")},m(n,l){k(n,e,l)},d(n){n&&g(e)}}}function Yt(t){let e,n,l,s,i,o,r,u=t[2],c=[];for(let d=0;d<u.length;d+=1)c[d]=Zt(Gt(t,u,d));const f=d=>M(c[d],1,1,()=>{c[d]=null});let a=t[1],m=[];for(let d=0;d<a.length;d+=1)m[d]=Jt(Kt(t,a,d));const p=d=>M(m[d],1,1,()=>{m[d]=null});return{c(){e=w("h3"),e.textContent="Apps",n=D();for(let d=0;d<c.length;d+=1)c[d].c();l=D(),s=w("h3"),s.textContent="Vars",i=D();for(let d=0;d<m.length;d+=1)m[d].c();o=ve(),y(e,"class","svelte-1unx23w"),y(s,"class","svelte-1unx23w")},m(d,h){k(d,e,h),k(d,n,h);for(let _=0;_<c.length;_+=1)c[_].m(d,h);k(d,l,h),k(d,s,h),k(d,i,h);for(let _=0;_<m.length;_+=1)m[_].m(d,h);k(d,o,h),r=!0},p(d,h){if(h[0]&65796){u=d[2];let _;for(_=0;_<u.length;_+=1){const E=Gt(d,u,_);c[_]?(c[_].p(E,h),O(c[_],1)):(c[_]=Zt(E),c[_].c(),O(c[_],1),c[_].m(l.parentNode,l))}for(G(),_=u.length;_<c.length;_+=1)f(_);Y()}if(h[0]&65794){a=d[1];let _;for(_=0;_<a.length;_+=1){const E=Kt(d,a,_);m[_]?(m[_].p(E,h),O(m[_],1)):(m[_]=Jt(E),m[_].c(),O(m[_],1),m[_].m(o.parentNode,o))}for(G(),_=a.length;_<m.length;_+=1)p(_);Y()}},i(d){if(!r){for(let h=0;h<u.length;h+=1)O(c[h]);for(let h=0;h<a.length;h+=1)O(m[h]);r=!0}},o(d){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)M(c[h]);m=m.filter(Boolean);for(let h=0;h<m.length;h+=1)M(m[h]);r=!1},d(d){d&&g(e),d&&g(n),xe(c,d),d&&g(l),d&&g(s),d&&g(i),xe(m,d),d&&g(o)}}}function Zt(t){let e,n;function l(){return t[22](t[30])}return e=new kn({props:{first:t[29]==0,entry:t[30],selected:t[8].includes(t[30])}}),e.$on("toggle",l),{c(){K(e.$$.fragment)},m(s,i){U(e,s,i),n=!0},p(s,i){t=s;const o={};i[0]&4&&(o.entry=t[30]),i[0]&260&&(o.selected=t[8].includes(t[30])),e.$set(o)},i(s){n||(O(e.$$.fragment,s),n=!0)},o(s){M(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function Jt(t){let e,n;function l(){return t[23](t[10])}return e=new kn({props:{first:t[29]==0,entry:t[10],selected:t[8].includes(t[10])}}),e.$on("toggle",l),{c(){K(e.$$.fragment)},m(s,i){U(e,s,i),n=!0},p(s,i){t=s;const o={};i[0]&2&&(o.entry=t[10]),i[0]&258&&(o.selected=t[8].includes(t[10])),e.$set(o)},i(s){n||(O(e.$$.fragment,s),n=!0)},o(s){M(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function zl(t){let e,n,l,s,i,o;function r(a,m){return a[8].length>0?Il:jl}let u=r(t),c=u(t),f=t[2]!=null&&t[1]!=null&&Yt(t);return{c(){e=w("main"),n=w("div"),l=w("div"),c.c(),s=D(),i=w("div"),f&&f.c(),y(l,"class","toolbar svelte-1unx23w"),y(i,"class","list svelte-1unx23w"),y(n,"class","center svelte-1unx23w"),y(e,"class","svelte-1unx23w")},m(a,m){k(a,e,m),B(e,n),B(n,l),c.m(l,null),B(n,s),B(n,i),f&&f.m(i,null),o=!0},p(a,m){u===(u=r(a))&&c?c.p(a,m):(c.d(1),c=u(a),c&&(c.c(),c.m(l,null))),a[2]!=null&&a[1]!=null?f?(f.p(a,m),m[0]&6&&O(f,1)):(f=Yt(a),f.c(),O(f,1),f.m(i,null)):f&&(G(),M(f,1,1,()=>{f=null}),Y())},i(a){o||(O(f),o=!0)},o(a){M(f),o=!1},d(a){a&&g(e),c.d(),f&&f.d()}}}function Vl(t,e,n){let l,s,i,o,r,u=A,c=()=>(u(),u=Xe(s,F=>n(20,r=F)),s),f,a=A,m=()=>(a(),a=Xe(l,F=>n(21,f=F)),l);t.$$.on_destroy.push(()=>u()),t.$$.on_destroy.push(()=>a());const{open:p}=pn("simple-modal");let{device:d}=e;function h(F,pe){n(8,z=z.map(ae=>F.concat(pe).find(be=>be.type==ae.type&&be.name==ae.name)).filter(ae=>ae!=null))}let _=!1;async function E(){let F=await Dt();try{n(3,_=!0),await d.send_file(F),oe.push("File uploaded",{theme:Ee})}finally{n(3,_=!1)}}let v=!1;function C(){p(qt,{backup:!0,cb:async F=>{try{n(4,v=!0),await d.backup(F),nt("backup.tig"),oe.push("Calculator backed up",{theme:Ee})}finally{n(4,v=!1)}}})}let T=!1;async function N(){p(qt,{backup:!1,cb:async F=>{await Dt("backup.tig");try{n(5,T=!0),await d.restore(F),oe.push("Calculator restored",{theme:Ee})}finally{n(5,T=!1)}}})}let S=!1;async function L(){try{n(6,S=!0),await d.list_dir(),oe.push("Files refreshed",{theme:Ee})}finally{n(6,S=!1)}}let I=!1;async function x(){try{n(7,I=!0);let F=await d.recv_screen();p(Rl,{imageData:F})}finally{n(7,I=!1)}}let z=[];function ee(F){z.includes(F)?z.splice(z.indexOf(F),1):z.push(F),n(8,z)}let V=!1;async function ue(){try{V=!0;let F=await d.read_files(z);nt(F)}finally{V=!1}}async function se(){if(confirm("Are you sure you want to delete these variables?"))try{V=!0;for(const F of z)await F.delete(!0);await d.list_dir(),oe.push("Variables deleted",{theme:Ee})}finally{V=!1}}let Z=ut();function W(){Z("disconnect")}const j=F=>ee(F),qe=F=>ee(F);return t.$$set=F=>{"device"in F&&n(0,d=F.device)},t.$$.update=()=>{t.$$.dirty[0]&1&&m(n(9,l=d.apps)),t.$$.dirty[0]&1&&c(n(10,s=d.vars)),t.$$.dirty[0]&2097152&&n(2,i=f==null?void 0:f.simplify().children),t.$$.dirty[0]&1048576&&n(1,o=r==null?void 0:r.simplify().children),t.$$.dirty[0]&6&&h(i,o)},[d,o,i,_,v,T,S,I,z,l,s,E,C,N,L,x,ee,ue,se,W,r,f,j,qe]}class Kl extends le{constructor(e){super(),ne(this,e,Vl,zl,$,{device:0},null,[-1,-1])}}const{window:Gl}=bn;function Qt(t){let e,n,l,s,i,o,r,u,c,f,a,m,p,d,h,_,E,v,C=t[1].closeButton&&Xt(t);var T=t[2];function N(S){return{}}return T&&(o=Se(T,N())),{c(){e=w("div"),n=w("div"),l=w("div"),C&&C.c(),s=D(),i=w("div"),o&&K(o.$$.fragment),y(i,"class",r=te(t[1].classContent)+" svelte-n7cvum"),y(i,"style",t[9]),Q(i,"content",!t[0]),y(l,"class",u=te(t[1].classWindow)+" svelte-n7cvum"),y(l,"role","dialog"),y(l,"aria-modal","true"),y(l,"aria-label",c=t[1].ariaLabelledBy?null:t[1].ariaLabel||null),y(l,"aria-labelledby",f=t[1].ariaLabelledBy||null),y(l,"style",t[8]),Q(l,"window",!t[0]),y(n,"class",m=te(t[1].classWindowWrap)+" svelte-n7cvum"),y(n,"style",t[7]),Q(n,"wrap",!t[0]),y(e,"id",p=t[1].id),y(e,"class",d=te(t[1].classBg)+" svelte-n7cvum"),y(e,"style",t[6]),Q(e,"bg",!t[0])},m(S,L){k(S,e,L),B(e,n),B(n,l),C&&C.m(l,null),B(l,s),B(l,i),o&&U(o,i,null),t[50](l),t[51](n),t[52](e),_=!0,E||(v=[R(l,"introstart",function(){re(t[13])&&t[13].apply(this,arguments)}),R(l,"outrostart",function(){re(t[14])&&t[14].apply(this,arguments)}),R(l,"introend",function(){re(t[15])&&t[15].apply(this,arguments)}),R(l,"outroend",function(){re(t[16])&&t[16].apply(this,arguments)}),R(e,"mousedown",t[20]),R(e,"mouseup",t[21])],E=!0)},p(S,L){if(t=S,t[1].closeButton?C?(C.p(t,L),L[0]&2&&O(C,1)):(C=Xt(t),C.c(),O(C,1),C.m(l,s)):C&&(G(),M(C,1,1,()=>{C=null}),Y()),T!==(T=t[2])){if(o){G();const I=o;M(I.$$.fragment,1,0,()=>{H(I,1)}),Y()}T?(o=Se(T,N()),K(o.$$.fragment),O(o.$$.fragment,1),U(o,i,null)):o=null}(!_||L[0]&2&&r!==(r=te(t[1].classContent)+" svelte-n7cvum"))&&y(i,"class",r),(!_||L[0]&512)&&y(i,"style",t[9]),(!_||L[0]&3)&&Q(i,"content",!t[0]),(!_||L[0]&2&&u!==(u=te(t[1].classWindow)+" svelte-n7cvum"))&&y(l,"class",u),(!_||L[0]&2&&c!==(c=t[1].ariaLabelledBy?null:t[1].ariaLabel||null))&&y(l,"aria-label",c),(!_||L[0]&2&&f!==(f=t[1].ariaLabelledBy||null))&&y(l,"aria-labelledby",f),(!_||L[0]&256)&&y(l,"style",t[8]),(!_||L[0]&3)&&Q(l,"window",!t[0]),(!_||L[0]&2&&m!==(m=te(t[1].classWindowWrap)+" svelte-n7cvum"))&&y(n,"class",m),(!_||L[0]&128)&&y(n,"style",t[7]),(!_||L[0]&3)&&Q(n,"wrap",!t[0]),(!_||L[0]&2&&p!==(p=t[1].id))&&y(e,"id",p),(!_||L[0]&2&&d!==(d=te(t[1].classBg)+" svelte-n7cvum"))&&y(e,"class",d),(!_||L[0]&64)&&y(e,"style",t[6]),(!_||L[0]&3)&&Q(e,"bg",!t[0])},i(S){_||(O(C),o&&O(o.$$.fragment,S),he(()=>{a||(a=Ge(l,t[12],t[1].transitionWindowProps,!0)),a.run(1)}),he(()=>{h||(h=Ge(e,t[11],t[1].transitionBgProps,!0)),h.run(1)}),_=!0)},o(S){M(C),o&&M(o.$$.fragment,S),a||(a=Ge(l,t[12],t[1].transitionWindowProps,!1)),a.run(0),h||(h=Ge(e,t[11],t[1].transitionBgProps,!1)),h.run(0),_=!1},d(S){S&&g(e),C&&C.d(),o&&H(o),t[50](null),S&&a&&a.end(),t[51](null),t[52](null),S&&h&&h.end(),E=!1,X(v)}}}function Xt(t){let e,n,l,s,i;const o=[Zl,Yl],r=[];function u(c,f){return f[0]&2&&(e=null),e==null&&(e=!!c[17](c[1].closeButton)),e?0:1}return n=u(t,[-1,-1,-1]),l=r[n]=o[n](t),{c(){l.c(),s=ve()},m(c,f){r[n].m(c,f),k(c,s,f),i=!0},p(c,f){let a=n;n=u(c,f),n===a?r[n].p(c,f):(G(),M(r[a],1,1,()=>{r[a]=null}),Y(),l=r[n],l?l.p(c,f):(l=r[n]=o[n](c),l.c()),O(l,1),l.m(s.parentNode,s))},i(c){i||(O(l),i=!0)},o(c){M(l),i=!1},d(c){r[n].d(c),c&&g(s)}}}function Yl(t){let e,n,l,s;return{c(){e=w("button"),y(e,"class",n=te(t[1].classCloseButton)+" svelte-n7cvum"),y(e,"aria-label","Close modal"),y(e,"style",t[10]),y(e,"type","button"),Q(e,"close",!t[0])},m(i,o){k(i,e,o),l||(s=R(e,"click",t[18]),l=!0)},p(i,o){o[0]&2&&n!==(n=te(i[1].classCloseButton)+" svelte-n7cvum")&&y(e,"class",n),o[0]&1024&&y(e,"style",i[10]),o[0]&3&&Q(e,"close",!i[0])},i:A,o:A,d(i){i&&g(e),l=!1,s()}}}function Zl(t){let e,n,l;var s=t[1].closeButton;function i(o){return{props:{onClose:o[18]}}}return s&&(e=Se(s,i(t))),{c(){e&&K(e.$$.fragment),n=ve()},m(o,r){e&&U(e,o,r),k(o,n,r),l=!0},p(o,r){if(s!==(s=o[1].closeButton)){if(e){G();const u=e;M(u.$$.fragment,1,0,()=>{H(u,1)}),Y()}s?(e=Se(s,i(o)),K(e.$$.fragment),O(e.$$.fragment,1),U(e,n.parentNode,n)):e=null}},i(o){l||(e&&O(e.$$.fragment,o),l=!0)},o(o){e&&M(e.$$.fragment,o),l=!1},d(o){o&&g(n),e&&H(e,o)}}}function Jl(t){let e,n,l,s,i=t[2]&&Qt(t);const o=t[49].default,r=ln(o,t,t[48],null);return{c(){i&&i.c(),e=D(),r&&r.c()},m(u,c){i&&i.m(u,c),k(u,e,c),r&&r.m(u,c),n=!0,l||(s=R(Gl,"keydown",t[19]),l=!0)},p(u,c){u[2]?i?(i.p(u,c),c[0]&4&&O(i,1)):(i=Qt(u),i.c(),O(i,1),i.m(e.parentNode,e)):i&&(G(),M(i,1,1,()=>{i=null}),Y()),r&&r.p&&(!n||c[1]&131072)&&on(r,o,u,u[48],n?rn(o,u[48],c,null):cn(u[48]),null)},i(u){n||(O(i),O(r,u),n=!0)},o(u){M(i),M(r,u),n=!1},d(u){i&&i.d(u),u&&g(e),r&&r.d(u),l=!1,s()}}}function Ql(t,e={}){return function(l){return new t({...l,props:{...e,...l.props}})}}function Xl(t,e,n){let{$$slots:l={},$$scope:s}=e;const i=ut(),o=Jn,r=b=>b.tabIndex>=0&&!b.hidden&&!b.disabled&&b.style.display!=="none"&&b.type!=="hidden"&&Boolean(b.offsetWidth||b.offsetHeight||b.getClientRects().length);let{isTabbable:u=r}=e,{show:c=null}=e,{id:f=null}=e,{key:a="simple-modal"}=e,{ariaLabel:m=null}=e,{ariaLabelledBy:p=null}=e,{closeButton:d=!0}=e,{closeOnEsc:h=!0}=e,{closeOnOuterClick:_=!0}=e,{styleBg:E={}}=e,{styleWindowWrap:v={}}=e,{styleWindow:C={}}=e,{styleContent:T={}}=e,{styleCloseButton:N={}}=e,{classBg:S=null}=e,{classWindowWrap:L=null}=e,{classWindow:I=null}=e,{classContent:x=null}=e,{classCloseButton:z=null}=e,{unstyled:ee=!1}=e,{setContext:V=o}=e,{transitionBg:ue=vn}=e,{transitionBgProps:se={duration:250}}=e,{transitionWindow:Z=ue}=e,{transitionWindowProps:W=se}=e,{disableFocusTrap:j=!1}=e;const qe={id:f,ariaLabel:m,ariaLabelledBy:p,closeButton:d,closeOnEsc:h,closeOnOuterClick:_,styleBg:E,styleWindowWrap:v,styleWindow:C,styleContent:T,styleCloseButton:N,classBg:S,classWindowWrap:L,classWindow:I,classContent:x,classCloseButton:z,transitionBg:ue,transitionBgProps:se,transitionWindow:Z,transitionWindowProps:W,disableFocusTrap:j,isTabbable:u,unstyled:ee};let F={...qe},pe=null,ae,be,Ne,lt,_t,mt,ht,pt,bt,yt,gt,wt,vt,kt,Ct;const Bn=b=>b.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase(),Me=b=>b?Object.keys(b).reduce((Ae,fe)=>`${Ae}; ${Bn(fe)}: ${b[fe]}`,""):"",Bt=b=>!!(b&&b.constructor&&b.call&&b.apply),Tn=()=>{n(6,_t=Me(Object.assign({},{width:window.innerWidth,height:window.innerHeight},F.styleBg))),n(7,mt=Me(F.styleWindowWrap)),n(8,ht=Me(F.styleWindow)),n(9,pt=Me(F.styleContent)),n(10,bt=Me(F.styleCloseButton)),n(11,yt=F.transitionBg),n(12,gt=F.transitionWindow)},Ue=()=>{};let Tt=Ue,He=Ue,Et=Ue,ze=Ue;const Wt=(b,Ae={},fe={},J={})=>{n(2,pe=Ql(b,Ae)),n(1,F={...qe,...fe}),Tn(),Sn(),n(13,Tt=de=>{J.onOpen&&J.onOpen(de),i("open"),i("opening")}),n(14,He=de=>{J.onClose&&J.onClose(de),i("close"),i("closing")}),n(15,Et=de=>{J.onOpened&&J.onOpened(de),i("opened")}),n(16,ze=de=>{J.onClosed&&J.onClosed(de),i("closed")})},ke=(b={})=>{pe&&(n(14,He=b.onClose||He),n(16,ze=b.onClosed||ze),n(2,pe=null),Fn())},En=b=>{if(F.closeOnEsc&&pe&&b.key==="Escape"&&(b.preventDefault(),ke()),pe&&b.key==="Tab"&&!F.disableFocusTrap){const Ae=Ne.querySelectorAll("*"),fe=Array.from(Ae).filter(F.isTabbable).sort((de,Dn)=>de.tabIndex-Dn.tabIndex);let J=fe.indexOf(document.activeElement);J===-1&&b.shiftKey&&(J=0),J+=fe.length+(b.shiftKey?-1:1),J%=fe.length,fe[J].focus(),b.preventDefault()}},Wn=b=>{F.closeOnOuterClick&&(b.target===ae||b.target===be)&&(Ct=b.target)},On=b=>{F.closeOnOuterClick&&b.target===Ct&&(b.preventDefault(),ke())},Sn=()=>{lt=window.scrollY,wt=document.body.style.position,vt=document.body.style.overflow,kt=document.body.style.width,document.body.style.position="fixed",document.body.style.top=`-${lt}px`,document.body.style.overflow="hidden",document.body.style.width="100%"},Fn=()=>{document.body.style.position=wt||"",document.body.style.top="",document.body.style.overflow=vt||"",document.body.style.width=kt||"",window.scrollTo({top:lt,left:0,behavior:"instant"})};V(a,{open:Wt,close:ke});let Ve=!1;hn(()=>{Ve&&ke()}),mn(()=>{n(47,Ve=!0)});function Mn(b){Oe[b?"unshift":"push"](()=>{Ne=b,n(5,Ne)})}function An(b){Oe[b?"unshift":"push"](()=>{be=b,n(4,be)})}function Ln(b){Oe[b?"unshift":"push"](()=>{ae=b,n(3,ae)})}return t.$$set=b=>{"isTabbable"in b&&n(22,u=b.isTabbable),"show"in b&&n(23,c=b.show),"id"in b&&n(24,f=b.id),"key"in b&&n(25,a=b.key),"ariaLabel"in b&&n(26,m=b.ariaLabel),"ariaLabelledBy"in b&&n(27,p=b.ariaLabelledBy),"closeButton"in b&&n(28,d=b.closeButton),"closeOnEsc"in b&&n(29,h=b.closeOnEsc),"closeOnOuterClick"in b&&n(30,_=b.closeOnOuterClick),"styleBg"in b&&n(31,E=b.styleBg),"styleWindowWrap"in b&&n(32,v=b.styleWindowWrap),"styleWindow"in b&&n(33,C=b.styleWindow),"styleContent"in b&&n(34,T=b.styleContent),"styleCloseButton"in b&&n(35,N=b.styleCloseButton),"classBg"in b&&n(36,S=b.classBg),"classWindowWrap"in b&&n(37,L=b.classWindowWrap),"classWindow"in b&&n(38,I=b.classWindow),"classContent"in b&&n(39,x=b.classContent),"classCloseButton"in b&&n(40,z=b.classCloseButton),"unstyled"in b&&n(0,ee=b.unstyled),"setContext"in b&&n(41,V=b.setContext),"transitionBg"in b&&n(42,ue=b.transitionBg),"transitionBgProps"in b&&n(43,se=b.transitionBgProps),"transitionWindow"in b&&n(44,Z=b.transitionWindow),"transitionWindowProps"in b&&n(45,W=b.transitionWindowProps),"disableFocusTrap"in b&&n(46,j=b.disableFocusTrap),"$$scope"in b&&n(48,s=b.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&8388608|t.$$.dirty[1]&65536&&Ve&&(Bt(c)?Wt(c):ke())},[ee,F,pe,ae,be,Ne,_t,mt,ht,pt,bt,yt,gt,Tt,He,Et,ze,Bt,ke,En,Wn,On,u,c,f,a,m,p,d,h,_,E,v,C,T,N,S,L,I,x,z,V,ue,se,Z,W,j,Ve,s,l,Mn,An,Ln]}class xl extends le{constructor(e){super(),ne(this,e,Xl,Jl,$,{isTabbable:22,show:23,id:24,key:25,ariaLabel:26,ariaLabelledBy:27,closeButton:28,closeOnEsc:29,closeOnOuterClick:30,styleBg:31,styleWindowWrap:32,styleWindow:33,styleContent:34,styleCloseButton:35,classBg:36,classWindowWrap:37,classWindow:38,classContent:39,classCloseButton:40,unstyled:0,setContext:41,transitionBg:42,transitionBgProps:43,transitionWindow:44,transitionWindowProps:45,disableFocusTrap:46},null,[-1,-1,-1])}}function $l(t){let e,n,l;return{c(){e=w("button"),e.innerHTML='<span class="material-symbols-outlined">close</span>',y(e,"class","inverted svelte-xj41pv")},m(s,i){k(s,e,i),n||(l=R(e,"click",function(){re(t[0])&&t[0].apply(this,arguments)}),n=!0)},p(s,[i]){t=s},i:A,o:A,d(s){s&&g(e),n=!1,l()}}}function es(t,e,n){let{onClose:l}=e;return t.$$set=s=>{"onClose"in s&&n(0,l=s.onClose)},[l]}class ts extends le{constructor(e){super(),ne(this,e,es,$l,$,{onClose:0})}}function xt(t,e,n){const l=t.slice();return l[8]=e[n],l}function ns(t){let e;return{c(){e=q("Failed to load devices")},m(n,l){k(n,e,l)},p:A,d(n){n&&g(e)}}}function ls(t){let e,n,l,s,i=t[1],o=[];for(let r=0;r<i.length;r+=1)o[r]=$t(xt(t,i,r));return{c(){for(let r=0;r<o.length;r+=1)o[r].c();e=D(),n=w("button"),n.innerHTML=`<span class="material-symbols-outlined">add</span>
            Add new`,P(n,"margin-top","10px"),P(n,"padding-left","0")},m(r,u){for(let c=0;c<o.length;c+=1)o[c].m(r,u);k(r,e,u),k(r,n,u),l||(s=R(n,"click",t[4]),l=!0)},p(r,u){if(u&15){i=r[1];let c;for(c=0;c<i.length;c+=1){const f=xt(r,i,c);o[c]?o[c].p(f,u):(o[c]=$t(f),o[c].c(),o[c].m(e.parentNode,e))}for(;c<o.length;c+=1)o[c].d(1);o.length=i.length}},d(r){xe(o,r),r&&g(e),r&&g(n),l=!1,s()}}}function ss(t){let e,n,l,s;function i(){return t[6](t[8])}return{c(){e=w("button"),n=q("Connect"),P(e,"margin-left","auto"),e.disabled=t[2]},m(o,r){k(o,e,r),B(e,n),l||(s=R(e,"click",i),l=!0)},p(o,r){t=o,r&4&&(e.disabled=t[2])},d(o){o&&g(e),l=!1,s()}}}function is(t){let e;return{c(){e=w("button"),e.innerHTML=`<span class="material-symbols-rounded">warning</span>
                    Wrong model`,P(e,"margin-left","auto"),P(e,"color","var(--danger)")},m(n,l){k(n,e,l)},p:A,d(n){n&&g(e)}}}function $t(t){let e,n=t[8].name+"",l,s,i=t[8].port+"",o,r;function u(a,m){return a[0]!=null&&a[0]!=a[8].model?is:ss}let c=u(t),f=c(t);return{c(){e=w("div"),l=q(n),s=q(" on port "),o=q(i),r=D(),f.c(),y(e,"class","item svelte-1jolud5")},m(a,m){k(a,e,m),B(e,l),B(e,s),B(e,o),B(e,r),f.m(e,null)},p(a,m){m&2&&n!==(n=a[8].name+"")&&ge(l,n),m&2&&i!==(i=a[8].port+"")&&ge(o,i),c===(c=u(a))&&f?f.p(a,m):(f.d(1),f=c(a),f&&(f.c(),f.m(e,null)))},d(a){a&&g(e),f.d()}}}function rs(t){let e;return{c(){e=q("Loading devices...")},m(n,l){k(n,e,l)},p:A,d(n){n&&g(e)}}}function os(t){let e,n,l,s,i={ctx:t,current:null,token:null,hasCatch:!0,pending:rs,then:ls,catch:ns,value:1,error:11};return Ft(s=t[1],i),{c(){e=w("h4"),e.textContent="Choose a device:",n=D(),l=w("div"),i.block.c(),y(e,"class","svelte-1jolud5")},m(o,r){k(o,e,r),k(o,n,r),k(o,l,r),i.block.m(l,i.anchor=null),i.mount=()=>l,i.anchor=null},p(o,[r]){t=o,i.ctx=t,r&2&&s!==(s=t[1])&&Ft(s,i)||nl(i,t,r)},i:A,o:A,d(o){o&&g(e),o&&g(n),o&&g(l),i.block.d(),i.token=null,i=null}}}function cs(t,e,n){let{connect:l}=e,{requiredType:s=null}=e,i=!1,o=window;async function r(a){try{n(2,i=!0),await l(a)}finally{n(2,i=!1)}}o.allReady=async()=>{setTimeout(()=>{n(1,u=Ye())},10)};let u=Ye();navigator.usb.addEventListener("disconnect",a=>{n(1,u=Ye())});async function c(){await fl(),n(1,u=Ye())}const f=a=>r(a);return t.$$set=a=>{"connect"in a&&n(5,l=a.connect),"requiredType"in a&&n(0,s=a.requiredType)},t.$$.update=()=>{t.$$.dirty&2&&u.catch(a=>{console.error(a)})},[s,u,i,r,c,l,f]}class Cn extends le{constructor(e){super(),ne(this,e,cs,os,$,{connect:5,requiredType:0})}}function us(t){let e,n,l,s,i,o,r,u,c;return{c(){e=w("div"),n=w("p"),n.textContent="Your ROM is ready for download!",l=D(),s=w("div"),i=w("button"),i.textContent="Download",o=D(),r=w("button"),r.innerHTML=`<span class="material-symbols-rounded">login</span>
            Use with CEmu`,P(s,"display","inline-flex"),P(s,"align-items","center"),P(e,"text-align","center")},m(f,a){k(f,e,a),B(e,n),B(e,l),B(e,s),B(s,i),B(s,o),B(s,r),u||(c=[R(i,"click",t[8]),R(r,"click",t[9])],u=!0)},p:A,i:A,o:A,d(f){f&&g(e),u=!1,X(c)}}}function as(t){let e,n,l,s,i,o,r,u,c=t[3]&&en();return{c(){e=w("div"),n=w("p"),n.innerHTML="To dump the ROM, press apps, then CabriJr, then press y=(F1) twice,<br/> select open, select ARTIFICE, then select DUMP, then press mode.",l=D(),c&&c.c(),s=D(),i=w("button"),o=q("Done"),i.disabled=t[2],P(e,"text-align","center")},m(f,a){k(f,e,a),B(e,n),B(e,l),c&&c.m(e,null),B(e,s),B(e,i),B(i,o),r||(u=R(i,"click",t[6]),r=!0)},p(f,a){f[3]?c||(c=en(),c.c(),c.m(e,s)):c&&(c.d(1),c=null),a&4&&(i.disabled=f[2])},i:A,o:A,d(f){f&&g(e),c&&c.d(),r=!1,u()}}}function fs(t){let e,n,l,s,i,o,r;return{c(){e=w("div"),n=w("p"),n.textContent="Welcome! arTIfiCE will be loaded onto your device, as well as a dumper program",l=D(),s=w("button"),i=q("Load"),s.disabled=t[2],P(e,"text-align","center")},m(u,c){k(u,e,c),B(e,n),B(e,l),B(e,s),B(s,i),o||(r=R(s,"click",t[7]),o=!0)},p(u,c){c&4&&(s.disabled=u[2])},i:A,o:A,d(u){u&&g(e),o=!1,r()}}}function ds(t){let e,n,l,s,i;return s=new Cn({props:{connect:t[4],requiredType:20}}),{c(){e=w("div"),n=w("p"),n.textContent="You need a TI-84 Plus CE",l=D(),K(s.$$.fragment)},m(o,r){k(o,e,r),B(e,n),B(e,l),U(s,e,null),i=!0},p:A,i(o){i||(O(s.$$.fragment,o),i=!0)},o(o){M(s.$$.fragment,o),i=!1},d(o){o&&g(e),H(s)}}}function en(t){let e;return{c(){e=w("p"),e.textContent="ROM files not found! Ensure you dumped correctly!",P(e,"color","var(--danger)"),P(e,"font-weight","600")},m(n,l){k(n,e,l)},d(n){n&&g(e)}}}function _s(t){let e,n,l,s;const i=[ds,fs,as,us],o=[];function r(u,c){return u[0]==null?0:u[1]==0?1:u[1]==1?2:u[1]==2?3:-1}return~(e=r(t))&&(n=o[e]=i[e](t)),{c(){n&&n.c(),l=ve()},m(u,c){~e&&o[e].m(u,c),k(u,l,c),s=!0},p(u,[c]){let f=e;e=r(u),e===f?~e&&o[e].p(u,c):(n&&(G(),M(o[f],1,1,()=>{o[f]=null}),Y()),~e?(n=o[e],n?n.p(u,c):(n=o[e]=i[e](u),n.c()),O(n,1),n.m(l.parentNode,l)):n=null)},i(u){s||(O(n),s=!0)},o(u){M(n),s=!1},d(u){~e&&o[e].d(u),u&&g(l)}}}function ms(t,e,n){let l,s=async p=>{let d=await yn(p);await d.ready(),n(0,l=d),window.dev=l},i=0,o=!1,r=!1,u=window;async function c(){try{n(2,o=!0),n(3,r=!1),await l.list_dir();let p=ie(l.vars).simplify().children.filter(h=>h.name.startsWith("ROMData"));if(p.length==0){n(3,r=!0),n(2,o=!1);return}let d=[];for(const h of p)d.push(await h.read());await al()}finally{n(2,o=!1)}n(1,i++,i)}return[l,i,o,r,s,u,c,async()=>{n(2,o=!0),await l.send_file("dumper-builtin/cabri.8ek"),await l.send_file("dumper-builtin/arTIfiCE.8xv"),await l.send_file("dumper-builtin/dumper.8xp"),n(2,o=!1),n(1,i++,i)},()=>{nt("ti84PlusCE.rom")},async()=>{u.FS.mkdir("/persist"),u.FS.mount(u.IDBFS,{},"/persist"),await new Promise(p=>u.FS.syncfs(!0,p)),u.FS.writeFile("/persist/r.rom",u.FS.readFile("ti84PlusCE.rom")),await new Promise(p=>u.FS.syncfs(!1,p)),u.FS.unmount("/persist"),window.location.href="/ti"}]}class hs extends le{constructor(e){super(),ne(this,e,ms,_s,$,{})}}const{window:ps}=bn;function bs(t){let e,n,l,s,i,o;return i=new Cn({props:{connect:t[2]}}),{c(){e=w("main"),n=w("div"),l=w("h1"),l.textContent="Welcome!",s=D(),K(i.$$.fragment),y(l,"class","svelte-19n7bqj"),y(n,"class","center svelte-19n7bqj"),y(e,"class","svelte-19n7bqj")},m(r,u){k(r,e,u),B(e,n),B(n,l),B(n,s),U(i,n,null),o=!0},p:A,i(r){o||(O(i.$$.fragment,r),o=!0)},o(r){M(i.$$.fragment,r),o=!1},d(r){r&&g(e),H(i)}}}function ys(t){let e,n,l,s,i,o;return i=new hs({}),{c(){e=w("main"),n=w("div"),l=w("h1"),l.textContent="Dump ROM",s=D(),K(i.$$.fragment),y(l,"class","svelte-19n7bqj"),y(n,"class","center svelte-19n7bqj"),y(e,"class","svelte-19n7bqj")},m(r,u){k(r,e,u),B(e,n),B(n,l),B(n,s),U(i,n,null),o=!0},p:A,i(r){o||(O(i.$$.fragment,r),o=!0)},o(r){M(i.$$.fragment,r),o=!1},d(r){r&&g(e),H(i)}}}function gs(t){let e,n;return e=new Kl({props:{device:t[0]}}),e.$on("disconnect",t[6]),{c(){K(e.$$.fragment)},m(l,s){U(e,l,s),n=!0},p(l,s){const i={};s&1&&(i.device=l[0]),e.$set(i)},i(l){n||(O(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){H(e,l)}}}function ws(t){let e,n,l,s,i;const o=[gs,ys,bs],r=[];function u(c,f){return c[0]!=null?0:(e==null&&(e=!!window.location.href.includes("?dump")),e?1:2)}return n=u(t),l=r[n]=o[n](t),{c(){l.c(),s=ve()},m(c,f){r[n].m(c,f),k(c,s,f),i=!0},p(c,f){let a=n;n=u(c),n===a?r[n].p(c,f):(G(),M(r[a],1,1,()=>{r[a]=null}),Y(),l=r[n],l?l.p(c,f):(l=r[n]=o[n](c),l.c()),O(l,1),l.m(s.parentNode,s))},i(c){i||(O(l),i=!0)},o(c){M(l),i=!1},d(c){r[n].d(c),c&&g(s)}}}function vs(t){let e,n,l,s,i,o;return e=new Sl({props:{options:t[4]}}),l=new xl({props:{closeButton:t[1],styleWindow:{overflow:"hidden",width:"auto",display:"inline-block",margin:"0 auto;"},styleWindowWrap:{display:"flex"},$$slots:{default:[ws]},$$scope:{ctx:t}}}),{c(){K(e.$$.fragment),n=D(),K(l.$$.fragment)},m(r,u){U(e,r,u),k(r,n,u),U(l,r,u),s=!0,i||(o=R(ps,"unhandledrejection",t[5]),i=!0)},p(r,[u]){const c={};u&2&&(c.closeButton=r[1]),u&129&&(c.$$scope={dirty:u,ctx:r}),l.$set(c)},i(r){s||(O(e.$$.fragment,r),O(l.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),M(l.$$.fragment,r),s=!1},d(r){H(e,r),r&&g(n),H(l,r),i=!1,o()}}}function ks(t,e,n){let l,s,i=async f=>{let a=await yn(f);await a.ready(),await a.list_dir(),n(0,s=a),window.dev=s};function o(f){oe.push(f.message,{theme:Fl})}let r={classes:["tilp-toast"]};const u=f=>o(f.reason),c=()=>{s.destroy(),n(0,s=null)};return n(1,l=ts),[s,l,i,o,r,u,c]}class Cs extends le{constructor(e){super(),ne(this,e,ks,vs,$,{})}}new Cs({target:document.getElementById("app")});
